{% extends 'principal/layout.html' %}

{% block title %}Resultados{% endblock %}

{% block background %}{% endblock %}
{% block scripts%} 
<script>

var ctx = document.getElementById('myChart').getContext('2d');
var chart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'bar',

    // The data for our dataset
    data: {
        labels: [ {% for caregivers in caregivers %},'{{caregivers.name}}', {% endfor %}],
        datasets: [{
            label: "Resultados De Instrumentos",
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: [{% for instrumentresults in instrumentresults %},'{{instrumentresults.score}}', {% endfor %}],
        }]
    },

    // Configuration options go here
    options: {}
});

</script>
{% endblock %}

{% block headers %}{% endblock %}

{% block content %}
<div class="card-cv">
        <section class="content-header">
            <h1>Listar Resultados</h1>
        </section>
    <div class="box">
        <div class="box-header">
          <h3 class="box-title">Falta definir los filtros de búsqueda de resultados, esto es un ejemplo:</h3>
        </div>
        <!-- /.box-header -->
        <div class="box-body no-padding">
           <h4>Periodos de Aplicación: </h4>
           <div class="form-group">
                 <select class="form-control" id="application" name="application">
                    {% for a in applications %}
                        <option value={{ a.id }}>{{a}}</option>
                    {% endfor %}
                </select>
            </div>
            <h4>Cuidador: </h4>
           <div class="form-group">
                 <select class="form-control" id="caregiver" name="caregiver">
                    {% for c in caregivers %}
                        <option value={{ c.id }}>{{c}}</option>
                    {% endfor %}
                </select>
            </div>
            <form action="/resultsDetail/" method="POST">
                    {% csrf_token %}
                    <button class="btn btn-primary" type="submit" value="resultados">Ver resultados</button>
                </form>
        </div>
        <!-- /.box-body -->
      </div>
      <div class="pull-right">
                
    <a href="{% url "home" %}" class="btn btn-info">Regresar</a>
</div>
<canvas id="myChart" width="400" height="400"></canvas>
</div>


{% endblock %}